<html>
<head>
    <title>E-LogSheet::FormsList</title>
    <link rel="stylesheet" type="text/css"
        href="../AceMasterLayout/assets/css/ace.min.css" />
    <!-- <link href="stylesheets/stylesheets/formindex.css" rel="stylesheet" />-->
    <!-- <link href="stylesheets/stylesheets/index.css" rel="stylesheet" />-->
    <script type="text/javascript" src="stylesheets/accepts/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" src="stylesheets/accepts/js/jquery.dataTables.bootstrap.min.js"></script>
    <script type="text/javascript" src="stylesheets/accepts/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" src="stylesheets/accepts/js/buttons.flash.min.js"></script>
    <script type="text/javascript" src="stylesheets/accepts/js/buttons.html5.min.js"></script>
    <script type="text/javascript" src="stylesheets/accepts/js/buttons.print.min.js"></script>
    <script type="text/javascript" src="stylesheets/accepts/js/buttons.colVis.min.js"></script>
    <script type="text/javascript" src="stylesheets/accepts/js/dataTables.select.min.js"></script>


    <script src="../Scripts/bootbox.min.js"></script>


    <!--DATETIME PICKERS-->
    <!--   <link rel="stylesheet" href="../stylesheets/bootstrap-datetimepicker.min.css" />
    <link rel="stylesheet" href="../Scripts/bootstrap-datetimepicker.min.css" />
    <script type="text/javascript" src="../Scripts/moment.js"></script>
    <script src="../Scripts/bootstrap-datetimepicker.min.js"></script>-->
    <!--DATETIME PICKERS-->

    <!--DATE PICKER-->
    <link rel="stylesheet" href="Scripts/datepicker/css/datepicker.css" />
    <script type="text/javascript" src="Scripts/bootstrap-datepicker.js"></script>
    <!--DATE PICKER-->



    <div class="breadcrumbs" id="breadcrumbs">
        <script type="text/javascript">
            try { ace.settings.check('breadcrumbs', 'fixed') } catch (e) { }
        </script>

        <ul class="breadcrumb">
            <li>
                <i class="ace-icon fa fa-home home-icon"></i>
                <a href="#">Home</a>
            </li>
            <li class="active">Forms List</li>
        </ul>
        <!-- /.breadcrumb -->

        <div class="nav-search" id="nav-search">
        </div>
        <!-- /.nav-search -->
    </div>


    <style type="text/css">
        .Linking:hover {
            cursor: pointer;
            font-weight: bold;
            color: #4286F4;
        }

        .LinkingDel:hover {
            cursor: pointer;
            font-weight: bold;
            color: #FF0000;
        }



        /* The Modal (background) */


        /* Modal Content */


        .modal-header {
            background-color: #438eb9;
            color: white;
        }

        .dd2-item.dd-item > button {
            margin-left: 0px !important;
        }

        .dd-list .dd-list {
            padding-left: 0px;
        }

        .dd2-content {
            margin-bottom: 0px;
        }

        .custom-list-style {
            border: 1px solid #d0d3d4;
            padding: 10px;
            border-radius: 5px;
            margin-top: 0px;
            border-top: none;
            border-top-right-radius: 0px !important;
            border-top-left-radius: 0px !important;
        }
    </style>

</head>
<body>

    <div class="tooLong" id="container" ng-controller="MySecondController " style="min-height: 500px; height: auto;">
        <br />
        <div style="background-color: #438eb9; margin-bottom: 1px;" class="col-sm-12 table-header visible_list">
            <label style="color: white; font: bold;">Schedule Forms  </label>
        </div>
        <table id="Tbl_Formslist" class='table table-striped table-bordered table-hover'>
        </table>

    </div>

    <div id="ScheduleAssignmentsPopUp" class="modal fade" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Scheduling</h4>
                </div>

                <div class="modal-body" style="height: 470px; min-height: 470px; overflow: auto;">
                    <form id="attributeform">
                        <input type="text" id="LogSheetId" style="display: none;" />
                        <input type="text" id="ReccurencePatternId" style="display: none;" />

                        <ol class="dd-list">
                            <li class="dd-item dd2-item" data-id="15">
                                <div class="dd2-content">Recurrence Pattern</div>
                                <ol class="dd-list">
                                    <li class="dd-item dd2-item custom-list-style" data-id="16">
                                        <div>
                                            <input class="form-check-input" name="RP_Type" id="Daily" type="radio" onchange="RecPatChange()" />Daily &nbsp;&nbsp;
                                        <input class="form-check-input" name="RP_Type" id="Weekly" type="radio" onchange="RecPatChange()" />Weekly&nbsp;&nbsp;
                                        <input class="form-check-input" name="RP_Type" id="Monthly" type="radio" onchange="RecPatChange()" />Monthly&nbsp;&nbsp;
                                        <input class="form-check-input" name="RP_Type" id="Yearly" type="radio" onchange="RecPatChange()" />Yearly
                                        </div>

                                        <br />

                                        <div id="AR_Daily" style="display: none;">
                                            <div class="form-group row">
                                                <div class="col-lg-4">
                                                    <input class="form-check-input" name="ARD_Check" id="DailyCheck" type="radio" onchange="DailyCheckChange()" />Every&nbsp&nbsp&nbsp
                                                <input type="text" id="DailyCheck_Nos" style="width: 25%;" onchange="AllowOnlyPositiveIntegers(this.id)" disabled="disabled" />
                                                    day(s)
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-lg-4">
                                                    <input class="form-check-input" name="ARD_Check" id="EveryWeekday" type="radio" onchange="DailyCheckChange()" />Every Weekday&nbsp&nbsp&nbsp
                                                <select id="EveryWeekdaySelect" style="width: 50%;" disabled="disabled">
                                                    <option value="">Select</option>
                                                    <option value="Sunday">Sunday</option>
                                                    <option value="Monday">Monday</option>
                                                    <option value="Tuesday">Tuesday</option>
                                                    <option value="Wednesday">Wednesday</option>
                                                    <option value="Thursday">Thursday</option>
                                                    <option value="Friday">Friday</option>
                                                    <option value="Saturday">Saturday</option>
                                                </select>
                                                </div>
                                            </div>
                                        </div>


                                        <div id="AR_Weekly" style="display: none;">
                                            <div class="form-group row">
                                                <div class="col-lg-4">
                                                    Recur every&nbsp&nbsp&nbsp
                                                <input type="text" id="WeeklyRP_Nos" style="width: 25%;" onchange="AllowOnlyPositiveIntegers(this.id)" />
                                                    week(s) on:
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-sm-12">
                                                    <input class="form-check-input" name="ARD_Check" id="Weekly_Sunday" type="radio" />&nbsp;Sunday&nbsp;&nbsp;&nbsp
                                                 <input class="form-check-input" name="ARD_Check" id="Weekly_Monday" type="radio" />&nbsp;Monday&nbsp;&nbsp;&nbsp
                                                 <input class="form-check-input" name="ARD_Check" id="Weekly_Tuesday" type="radio" />&nbsp;Tuesday&nbsp;&nbsp;&nbsp
                                                 <input class="form-check-input" name="ARD_Check" id="Weekly_Wednesday" type="radio" />&nbsp;Wednesday&nbsp;&nbsp;&nbsp
                                                 <input class="form-check-input" name="ARD_Check" id="Weekly_Thursday" type="radio" />&nbsp;Thursday&nbsp;&nbsp;&nbsp
                                                 <input class="form-check-input" name="ARD_Check" id="Weekly_Friday" type="radio" />&nbsp;Friday&nbsp;&nbsp;&nbsp
                                                 <input class="form-check-input" name="ARD_Check" id="Weekly_Saturday" type="radio" />&nbsp;Saturday&nbsp;&nbsp;&nbsp
                                                </div>
                                            </div>
                                        </div>



                                        <div id="AR_Monthly" style="display: none;">
                                            <div class="form-group row">
                                                <div class="col-lg-6">
                                                    <input class="form-check-input" name="ARD_Check" id="AR_Monthly_NumberredDay" type="radio" onchange="MonthlyCheckChange()" />Day&nbsp&nbsp&nbsp
                                                <input type="text" id="AR_Month_NumberredDay_Recc" style="width: 25%;" onchange="AllowOnlyPositiveIntegers(this.id)" disabled="disabled" />
                                                    of every<input type="text" id="AR_Month_NumberredDay_Repeat" style="width: 25%;" onchange="AllowOnlyPositiveIntegers(this.id)" disabled="disabled" />&nbsp;&nbsp;months(s)
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-lg-10">
                                                    <input class="form-check-input" name="ARD_Check" id="AR_Monthly_WeekNo" type="radio" onchange="MonthlyCheckChange()" />The&nbsp&nbsp&nbsp;
                                                <select id="AR_Month_WeekNos" disabled="disabled">
                                                    <option value="">Select</option>
                                                    <option value="1">First</option>
                                                    <option value="2">Second</option>
                                                    <option value="3">Third</option>
                                                    <option value="4">Fourth</option>
                                                </select>
                                                    <select id="AR_Month_WeekDay" disabled="disabled">
                                                        <option value="">Select</option>
                                                        <option value="Sunday">Sunday</option>
                                                        <option value="Monday">Monday</option>
                                                        <option value="Tuesday">Tuesday</option>
                                                        <option value="Wednesday">Wednesday</option>
                                                        <option value="Thursday">Thursday</option>
                                                        <option value="Friday">Friday</option>
                                                        <option value="Saturday">Saturday</option>
                                                    </select>
                                                    of every<input type="text" id="AR_Month_WeekNo_Repeat" style="width: 25%;" onchange="AllowOnlyPositiveIntegers(this.id)" disabled="disabled" />&nbsp;&nbsp;months(s)
                                                </div>
                                            </div>
                                        </div>


                                        <div id="AR_Yearly" style="display: none;">
                                            <div class="form-group row">
                                                <div class="col-lg-6">
                                                    Recur every&nbsp&nbsp&nbsp
                                                <input type="text" id="AR_Yearly_Nos" style="width: 25%;" onchange="AllowOnlyPositiveIntegers(this.id)" />
                                                    year(s)
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-lg-10">
                                                    <input class="form-check-input" name="ARD_Check" id="AR_Yearly_RP_Date" type="radio" onchange="YearlyCheckChange()" />On&nbsp&nbsp&nbsp;   
                                                <select id="EveryYearlySelect" id="AR_Yearly_RP_Date_Month" disabled="disabled">
                                                    <option value="">Select</option>
                                                    <option value="January">January</option>
                                                    <option value="February">February</option>
                                                    <option value="March">March</option>
                                                    <option value="April">April</option>
                                                    <option value="May">May</option>
                                                    <option value="June">June</option>
                                                    <option value="July">July</option>
                                                    <option value="August">August</option>
                                                    <option value="September">September</option>
                                                    <option value="October">October</option>
                                                    <option value="November">November</option>
                                                    <option value="December">December</option>
                                                </select>
                                                    <input type="text" id="AR_Yearly_RP_Date_Date" style="width: 13%;" onchange="AllowOnlyPositiveIntegers(this.id)" disabled="disabled" />
                                                </div>
                                            </div>
                                            <div class="form-group row">
                                                <div class="col-lg-10">
                                                    <input class="form-check-input" name="ARD_Check" id="AR_Yearly_RP_MonthWeekDay" type="radio" onchange="YearlyCheckChange()" />On The&nbsp&nbsp&nbsp;   
                                                <select id="AR_Yearly_RP_MonthWeekDay_WeekNos" disabled="disabled">
                                                    <option value="">Select</option>
                                                    <option value="1">First</option>
                                                    <option value="2">Second</option>
                                                    <option value="3">Third</option>
                                                    <option value="4">Fourth</option>
                                                </select>
                                                    <select id="AR_Yearly_RP_MonthWeekDay_WeekDay" disabled="disabled">
                                                        <option value="">Select</option>
                                                        <option value="Sunday">Sunday</option>
                                                        <option value="Monday">Monday</option>
                                                        <option value="Tuesday">Tuesday</option>
                                                        <option value="Wednesday">Wednesday</option>
                                                        <option value="Thursday">Thursday</option>
                                                        <option value="Friday">Friday</option>
                                                        <option value="Saturday">Saturday</option>
                                                    </select>of&nbsp;
                                                <select id="AR_Yearly_RP_MonthWeekDay_WeekMonth" style="" disabled="disabled">
                                                    <option value="">Select</option>
                                                    <option value="January">January</option>
                                                    <option value="February">February</option>
                                                    <option value="March">March</option>
                                                    <option value="April">April</option>
                                                    <option value="May">May</option>
                                                    <option value="June">June</option>
                                                    <option value="July">July</option>
                                                    <option value="August">August</option>
                                                    <option value="September">September</option>
                                                    <option value="October">October</option>
                                                    <option value="November">November</option>
                                                    <option value="December">December</option>
                                                </select>
                                                </div>
                                            </div>
                                        </div>


                                    </li>
                                </ol>
                            </li>
                        </ol>

                        <ol class="dd-list">
                            <li class="dd-item dd2-item" data-id="15">
                                <div class="dd2-content">Range of recurrence</div>
                                <ol class="dd-list">
                                    <li class="dd-item dd2-item custom-list-style" data-id="16">
                                        <div class="form-group row">
                                            <div class=" col-sm-6 row">
                                                <label class="col-sm-3 control-label" for="Range_rec_start">Start:</label>
                                                <div class="col-lg-6 row">
                                                    <input class="form-control" id="Range_rec_start" placeholder="Enter Start Time" type="text" readonly="readonly" />
                                                </div>
                                            </div>
                                            <div class="col-lg-5 col-sm-6">
                                                <label class="form-check-label">
                                                    <input class="form-check-input" name="RR_NoEndTime" id="RR_NoEnd" type="radio" onchange="Rangerecurance_CheckChange()">
                                                    No end date
                                                </label>
                                                <br />
                                                <br />
                                                <label class="form-check-label">
                                                    <input class="form-check-input" name="RR_NoEndTime" id="RR_EndNos" type="radio" onchange="Rangerecurance_CheckChange()">
                                                    End after:&nbsp;&nbsp;<input type="text" id="RR_Endafter" onchange="AllowOnlyPositiveIntegers(this.id)" style="width: 25%;" />&nbsp;&nbsp;occurrences
                                                </label>
                                                <br />
                                                <br />
                                                <label class="form-check-label">
                                                    <input class="form-check-input" name="RR_NoEndTime" id="RR_EndDate" type="radio" onchange="Rangerecurance_CheckChange()">
                                                    End by:&nbsp;&nbsp;<input type="text" id="RR_endTime" style="width: 55%;" placeholder="Enter end Time" readonly="readonly" />
                                                </label>
                                                <br />
                                            </div>
                                        </div>
                                    </li>
                                </ol>
                            </li>
                        </ol>

                        <ol class="dd-list">
                            <li class="dd-item dd2-item" data-id="15">
                                <div class="dd2-content">Appointment Time</div>
                                <ol class="dd-list">
                                    <li class="dd-item dd2-item custom-list-style" data-id="16">
                                        <div class="form-group row">
                                            <label class="col-lg-2 control-label" for="AR_Start_Time">Start Time:</label>
                                            <div class="col-lg-5">
                                                <input class="form-control" id="AR_Start_Time" placeholder="Enter Start Time" type="text" onchange="AR_Start_End_Change(0)" readonly="readonly" />
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <label class="col-lg-2 control-label" for="AR_End_Time">End Time:</label>
                                            <div class="col-lg-5">
                                                <input class="form-control" id="AR_End_Time" placeholder="Enter Start Time" type="text" onchange="AR_Start_End_Change(1)" readonly="readonly" />
                                            </div>
                                        </div>

                                        <div class="form-group row">
                                            <label class="col-lg-2 control-label" for="AR_Duration">Duration:</label>
                                            <div class="col-lg-5">
                                                <input class="form-control" id="AR_Duration" placeholder="Enter Duration" type="text" readonly="readonly">
                                            </div>
                                        </div>
                                    </li>
                                </ol>
                            </li>

                        </ol>

                        <ol class="dd-list" id="PatternDisableProperties">
                            <li class="dd-item dd2-item" data-id="15">
                                <div class="dd2-content">Disable Pattern</div>
                                <ol class="dd-list">
                                    <li class="dd-item dd2-item custom-list-style" data-id="16">
                                        <div class="form-group row">
                                            <div class="col-lg-5 col-sm-6">
                                                <div class="checkbox">
                                                    <label>
                                                        <input name="form-field-checkbox" class="ace" type="checkbox" id="DeActivatePattern" onchange="DeActivatePatternClick()">
                                                        <span class="lbl">DeActivatePattern</span>
                                                    </label>
                                                </div>
                                            </div>
                                            <div class=" col-sm-6 row">
                                                <label class="col-sm-5 control-label" for="ReccPatDisableReason">Reason for Disable:</label>
                                                <div class="col-lg-6 row">
                                                    <select class="form-control" id="ReccPatDisableReason">
                                                        <option value="">Select</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                </ol>
                            </li>
                        </ol>


                    </form>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-primary" onclick="SaveRecurrencePattern()">Save</button>
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

</body>

</html>

<script type="text/javascript">

    $(document).ready(function () {
        $("#ReccPatDisableReason").chosen({
            width: '100%',
        });
        $("#EveryWeekdaySelect").chosen({
            width: '40%',
        });
        $("#AR_Month_WeekNos").chosen({
            width: '20%',
        });
        $("#Ar_Month_Weekday").chosen({
            width: '20%',
        });

        $("#EveryYearlySelect").chosen({
            width: '20%',
        });
        $("#AR_Yearly_RP_MonthWeekDay_WeekNos").chosen({
            width: '20%',
        });
        $("#AR_Yearly_RP_MonthWeekDay_WeekDay").chosen({
            width: '20%',
        });
        $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").chosen({
            width: '20%',
        });
        $("#AR_Month_WeekDay").chosen({
            width: '20%',
        });

        FormsListLoading();
        $.ajax({
            url: "../getPatternDisableReasons",
            type: "get",
            contentType: "application/json",
            success: function (Resp) {
                var data = "";
                for (var i = 0; i <= 2; i++) {
                    data += "<option value=" + Resp[i]["reason_id"] + ">" + Resp[i]["reason_name"] + "</option>";
                }
                $("#ReccPatDisableReason").append(data).trigger("chosen:updated");

                StopPageLoader();
            },
            error: function (e) {
                alert("Error : getPatternDisableReasons : " + e);
                StopPageLoader();
            }
        });
    });
    $(".dd-list").nestable();

    $('#AR_Start_Time').datetimepicker({
        pickDate: false,
        //format: 'LT',
        format: 'HH:mm',
        pick12HourFormat: false
    });
    $('#AR_End_Time').datetimepicker({
        pickDate: false,
        //format: 'LT',
        format: 'HH:mm',
        pick12HourFormat: false
    });
    $("#Range_rec_end").datetimepicker({
        format: 'DD/MM/YYYY',
        pickTime: false
    });
    var startDate;
    var endDate;
    $('#Range_rec_start').datepicker({ format: 'dd/mm/yyyy' })
    			.on('changeDate', function (ev) {
    			    startDate = new Date(ev.date.valueOf());
    			    startDate.setDate(startDate.getDate(new Date(ev.date.valueOf())));
    			    $('#RR_endTime').datepicker('setStartDate', startDate);
    			});
    $('#RR_endTime').on('changeDate', function (ev) {

        startDate = new Date(ev.date.valueOf());
        startDate.setDate(startDate.getDate(new Date(ev.date.valueOf())));
        $('#Range_rec_start').datepicker('setEndDate', startDate);
    });
    $("#RR_endTime").datepicker({
        format: 'dd/mm/yyyy'
    });

    function FormsListLoading() {
        try {
            $.ajax({
                url: "../GetFormsList",
                type: "GET",
                data: {},
                async: false,
                cache: false,
                success: function (data) {
                    if (data != "false") {
                        var TableCode = "";
                        TableCode = TableCode + "<thead>\n";
                        TableCode = TableCode + "<tr>\n";
                        TableCode = TableCode + "<th class='center'>Form Name</th>\n";
                        TableCode = TableCode + "<th class='center'>Form Type</th>\n";
                        TableCode = TableCode + "<th class='center'>Assign Form</th>\n";
                        TableCode = TableCode + "<th class='center'>Created By</th>\n";
                        TableCode = TableCode + "</tr>\n";
                        TableCode = TableCode + "</thead>\n";
                        TableCode = TableCode + "<tbody>\n";

                        for (var i = 0; i < data.length; i++) {
                            var date = data[i]["createdate"];
                            var d = new Date(date.split("/").reverse().join("-"));
                            var dd = d.getDate();
                            var mm = d.getMonth() + 1;
                            var yy = d.getFullYear();
                            TableCode = TableCode + "<tr id='TRID_" + data[i]["tagid"] + "'>";
                            TableCode = TableCode + "<td>" + data[i]["logsheetname"] + "</td>";
                            if (data[i]["type_form"] == null || data[i]["type_form"] == "") {
                                TableCode = TableCode + "<td></td>";
                            }
                            else {
                                TableCode = TableCode + "<td>" + data[i]["type_form"] + "</td>";
                            }
                            TableCode = TableCode + "<td class='Linking' onclick=OpenAssignmentsPopUp('" + data[i]["tagid"] + "')><i class='glyphicon glyphicon-edit'></i>Schedule</td>";
                            TableCode = TableCode + "<td>" + dd + "-" + mm + "-" + yy + "</td>";
                            TableCode = TableCode + "</tr>";
                        }

                        TableCode = TableCode + "</tbody>\n";
                        var tbody = $("#Tbl_Formslist");
                        tbody.append(TableCode);
                        $('#Tbl_Formslist').dataTable({
                            bAutoWidth: false,
                            "aaSorting": []
                        });
                    }
                    else {
                        alert("No data found");
                    }

                },
                error: function () {
                    alert("Ajax Error");
                }
            });
        }
        catch (e) {
            alert("Error :FormsListLoading" + "\t" + e);
        }
    }

    function OpenAssignmentsPopUp(_tagid) {
        $("#ScheduleAssignmentsPopUp").modal('show');
        $("#LogSheetId").val(_tagid);

        $("#FormScheduleAssignments").modal('show');

        $("#EveryWeekdaySelect").val("").trigger("chosen:updated");
        $("#AR_Month_WeekNos").val("").trigger("chosen:updated");
        $("#Ar_Month_Weekday").val("").trigger("chosen:updated");
        $("#AR_Month_WeekDay").val("").trigger("chosen:updated");
        $("#EveryYearlySelect").val("").trigger("chosen:updated");
        $("#AR_Yearly_RP_MonthWeekDay_WeekNos").val("").trigger("chosen:updated");
        $("#AR_Yearly_RP_MonthWeekDay_WeekDay").val("").trigger("chosen:updated");
        $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").val("").trigger("chosen:updated");


        FormData = JSON.stringify({
            FormId: _tagid
        });

        StartPageLoader();

        var CheckBoxes = [
            'Daily', 'Weekly', 'Monthly', 'Yearly',
            'DailyCheck', 'EveryWeekday',
            'AR_Monthly_NumberredDay', 'AR_Monthly_WeekNo',
            'AR_Yearly_RP_Date', 'AR_Yearly_RP_MonthWeekDay',
            'RR_NoEnd', 'RR_EndNos', 'RR_EndDate'
        ];

        for (var CB = 0; CB < CheckBoxes.length; CB++) {
            $("#" + CheckBoxes["" + CB + ""] + "").attr('checked', false);
        }

        var InputBoxes = [
            'DailyCheck_Nos', 'EveryWeekdaySelect',
            'WeeklyRP_Nos',
            'AR_Month_NumberredDay_Recc', 'AR_Month_NumberredDay_Repeat', 'AR_Month_WeekNos', 'AR_Month_WeekDay', 'AR_Month_WeekNo_Repeat',
            'AR_Yearly_Nos', 'EveryYearlySelect', 'AR_Yearly_RP_Date_Date', 'AR_Yearly_RP_MonthWeekDay_WeekNos', 'AR_Yearly_RP_MonthWeekDay_WeekDay', 'AR_Yearly_RP_MonthWeekDay_WeekMonth',
            'RR_Endafter', 'RR_endTime', 'Range_rec_start', 'AR_Start_Time', 'AR_End_Time', 'AR_Duration'
        ];

        for (var IB = 0; IB < InputBoxes.length; IB++) {
            $("#" + InputBoxes["" + IB + ""] + "").val("");
        }

        $("#AR_Daily").css("display", "none");
        $("#AR_Weekly").css("display", "none");
        $("#AR_Monthly").css("display", "none");
        $("#AR_Yearly").css("display", "none");


        $.ajax({
            type: 'POST',
            datatype: 'json',
            url: "../../GetFormReccurencePattern_FormId",
            data: FormData,
            contentType: 'application/json',
            async: false,
            cache: false,
            success: function (Res) {
                if (Res == false) {
                    $("#PatternDisableProperties").css("display", "none");
                }
                else {
                    Res = JSON.parse(Res);
                    var PatternData = Res["PatternData"];
                    var ReccurenceData = Res["ReccurenceData"];

                    $("#ReccPatDisableReason").val(PatternData["inactivereason"]).trigger("chosen:updated");
                    $("#ReccurencePatternId").val(PatternData["pattern_id"]);
                    $("#AR_Start_Time").val(PatternData["start_time"]);
                    $("#AR_End_Time").val(PatternData["end_time"]);
                    $("#AR_Duration").val(PatternData["duration"]);

                    var StartDate = PatternData["start_date"];
                    var dateformat = new Date(StartDate.split('-')[0], (StartDate.split('-')[1]) - 1, StartDate.split('-')[2]);
                    $("#Range_rec_start").datepicker("setDate", dateformat);

                    if (PatternData["end_pattern"] == "0") {
                        $("#RR_NoEnd").prop("checked", "checked");
                    }
                    else if (PatternData["end_pattern"] == "EndNos") {
                        $("#RR_EndNos").prop("checked", "checked");
                        $("#RR_Endafter").val(PatternData["end_nos"]);
                        $("#RR_endTime").val("");
                        $("#RR_endTime").attr("disabled", "disabled");
                    }
                    else if (PatternData["end_pattern"] == "EndDate") {
                        $("#RR_EndDate").prop("checked", "checked");
                        $("#RR_Endafter").val("");
                        $("#RR_Endafter").attr("disabled", "disabled");

                        var EndDate = PatternData["end_date"];
                        var dateformat2 = new Date(EndDate.split('-')[0], (EndDate.split('-')[1]) - 1, EndDate.split('-')[2]);
                        $("#RR_endTime").datepicker("setDate", dateformat2);
                    }

                    if (PatternData["reccurance_interval"] == "Daily") {
                        $("#Daily").prop("checked", "checked");
                        $("#AR_Daily").css("display", "block");
                        $("#AR_Weekly").css("display", "none");
                        $("#AR_Monthly").css("display", "none");
                        $("#AR_Yearly").css("display", "none");

                        if (ReccurenceData["interval_weekday"] == "DailyCheck") {
                            $("#DailyCheck").prop("checked", "checked");
                            $("#DailyCheck_Nos").val(ReccurenceData["days_nos"]);
                            $("#DailyCheck_Nos").attr("disabled", false);
                            $("#EveryWeekdaySelect").val("").trigger("chosen:updated");
                            $("#EveryWeekdaySelect").attr("disabled", "disabled").trigger("chosen:updated");
                        }
                        else if (ReccurenceData["interval_weekday"] == "WeekDayCheck") {
                            $("#EveryWeekday").prop("checked", "checked");
                            $("#DailyCheck_Nos").val("");
                            $("#DailyCheck_Nos").attr("disabled", "disabled");
                            $("#EveryWeekdaySelect").val(ReccurenceData["weekday"]).trigger("chosen:updated");
                            $("#EveryWeekdaySelect").attr("disabled", false).trigger("chosen:updated");
                        }

                    }
                    else if (PatternData["reccurance_interval"] == "Weekly") {
                        $("#Weekly").prop("checked", "checked");
                        $("#AR_Daily").css("display", "none");
                        $("#AR_Weekly").css("display", "block");
                        $("#AR_Monthly").css("display", "none");
                        $("#AR_Yearly").css("display", "none");

                        $("#WeeklyRP_Nos").val(ReccurenceData["weeks_interval"]);
                        $("#Weekly_" + ReccurenceData["weeks_interval_day"] + "").prop("checked", "checked");

                    }
                    else if (PatternData["reccurance_interval"] == "Monthly") {
                        $("#Monthly").prop("checked", "checked");
                        $("#AR_Daily").css("display", "none");
                        $("#AR_Weekly").css("display", "none");
                        $("#AR_Monthly").css("display", "block");
                        $("#AR_Yearly").css("display", "none");

                        if (ReccurenceData["datemonth_weekdayofthemonth"] == "Day") {
                            $("#AR_Monthly_NumberredDay").prop("checked", "checked");

                            $("#AR_Month_NumberredDay_Recc").val(ReccurenceData["dateofthemonth"]);
                            $("#AR_Month_NumberredDay_Repeat").val(ReccurenceData["monthinterval"]);
                            $("#AR_Month_NumberredDay_Recc").attr("disabled", false);
                            $("#AR_Month_NumberredDay_Repeat").attr("disabled", false);

                            $("#AR_Month_WeekNos").val("").trigger("chosen:updated");
                            $("#AR_Month_WeekDay").val("").trigger("chosen:updated");;
                            $("#AR_Month_WeekNo_Repeat").val("");

                            $("#AR_Month_WeekNos").attr("disabled", "disabled").trigger("chosen:updated");
                            $("#AR_Month_WeekDay").attr("disabled", "disabled").trigger("chosen:updated");;
                            $("#AR_Month_WeekNo_Repeat").attr("disabled", "disabled");
                        }
                        else if (ReccurenceData["datemonth_weekdayofthemonth"] == "NumberedWeekDay") {
                            $("#AR_Monthly_WeekNo").prop("checked", "checked");

                            $("#AR_Month_NumberredDay_Recc").val("");
                            $("#AR_Month_NumberredDay_Repeat").val("");
                            $("#AR_Month_NumberredDay_Recc").attr("disabled", "disabled");
                            $("#AR_Month_NumberredDay_Repeat").attr("disabled", "disabled");

                            $("#AR_Month_WeekNos").val(ReccurenceData["monthinterval_week"]).trigger("chosen:updated");
                            $("#AR_Month_WeekDay").val(ReccurenceData["weekday"]).trigger("chosen:updated");;
                            $("#AR_Month_WeekNo_Repeat").val(ReccurenceData["weekno"]);

                            $("#AR_Month_WeekNos").attr("disabled", false).trigger("chosen:updated");
                            $("#AR_Month_WeekDay").attr("disabled", false).trigger("chosen:updated");;
                            $("#AR_Month_WeekNo_Repeat").attr("disabled", false);
                        }

                    }
                    else if (PatternData["reccurance_interval"] == "Yearly") {
                        $("#Yearly").prop("checked", "checked");
                        $("#AR_Daily").css("display", "none");
                        $("#AR_Weekly").css("display", "none");
                        $("#AR_Monthly").css("display", "none");
                        $("#AR_Yearly").css("display", "block");

                        if (ReccurenceData["datemonth_weekdayofthemonth"] == "Date") {

                            $("#AR_Yearly_RP_Date").prop("checked", "checked");
                            $("#AR_Yearly_Nos").val(ReccurenceData["yearlyinterval"]);

                            $("#EveryYearlySelect").val(ReccurenceData["datemonth_month"]).trigger("chosen:updated");
                            $("#AR_Yearly_RP_Date_Date").val(ReccurenceData["datemonth_date"]);
                            $("#EveryYearlySelect").attr("disabled", false).trigger("chosen:updated");
                            $("#AR_Yearly_RP_Date_Date").attr("disabled", false);

                            $("#AR_Yearly_RP_MonthWeekDay_WeekNos").val("").trigger("chosen:updated");
                            $("#AR_Yearly_RP_MonthWeekDay_WeekDay").val("").trigger("chosen:updated");
                            $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").val("").trigger("chosen:updated");

                            $("#AR_Yearly_RP_MonthWeekDay_WeekNos").attr("disabled", "disabled").trigger("chosen:updated");
                            $("#AR_Yearly_RP_MonthWeekDay_WeekDay").attr("disabled", "disabled").trigger("chosen:updated");
                            $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").attr("disabled", "disabled").trigger("chosen:updated");

                        }
                        else if (ReccurenceData["datemonth_weekdayofthemonth"] == "MonthWeekDay") {

                            $("#AR_Yearly_RP_MonthWeekDay").prop("checked", "checked");
                            $("#AR_Yearly_Nos").val(ReccurenceData["yearlyinterval"]);

                            $("#EveryYearlySelect").val("").trigger("chosen:updated");
                            $("#AR_Yearly_RP_Date_Date").val("");
                            $("#EveryYearlySelect").attr("disabled", "disabled").trigger("chosen:updated");
                            $("#AR_Yearly_RP_Date_Date").attr("disabled", "disabled");

                            $("#AR_Yearly_RP_MonthWeekDay_WeekNos").val(ReccurenceData["weekno"]).trigger("chosen:updated");
                            $("#AR_Yearly_RP_MonthWeekDay_WeekDay").val(ReccurenceData["weekday"]).trigger("chosen:updated");
                            $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").val(ReccurenceData["monthname"]);

                            $("#AR_Yearly_RP_MonthWeekDay_WeekNos").attr("disabled", false).trigger("chosen:updated");
                            $("#AR_Yearly_RP_MonthWeekDay_WeekDay").attr("disabled", false).trigger("chosen:updated");
                            $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").attr("disabled", false).trigger("chosen:updated");


                        }

                    }

                    if (PatternData["active"] == "Active") {
                        $("#DeActivatePattern").prop('checked', false);
                        $("#ReccPatDisableReason").val("");
                        $("#ReccPatDisableReason").prop("disabled", true);
                    }
                    else if (PatternData["active"] == "InActive") {
                        $("#DeActivatePattern").attr('checked', true);
                        $("#ReccPatDisableReason").val(PatternData["inactivereason"]);
                    }

                    $("#PatternDisableProperties").css("display", "block");

                }

                StopPageLoader();
            },
            errror: function (Err) {
                StopPageLoader();
            }
        });


    }

    function AR_Start_End_Change(_id) {
        try {

            var timefrom = new Date();
            temp = $('#AR_Start_Time').val().split(":");
            timefrom.setHours((parseInt(temp[0]) - 1 + 24) % 24);
            timefrom.setMinutes(parseInt(temp[1]));

            var timeto = new Date();
            temp = $('#AR_End_Time').val().split(":");
            timeto.setHours((parseInt(temp[0]) - 1 + 24) % 24);
            timeto.setMinutes(parseInt(temp[1]));

            if (timeto < timefrom) {
                alert('End time Should be greater than Start time');
            }
            else {
                var AR_Start_Time = $("#AR_Start_Time").val(), AR_End_Time = $("#AR_End_Time").val();
                var ary1 = AR_Start_Time.split(':'), ary2 = AR_End_Time.split(':');
                var minsdiff = parseInt(ary2[0], 10) * 60 + parseInt(ary2[1], 10) - parseInt(ary1[0], 10) * 60 - parseInt(ary1[1], 10);
                var duration = String(100 + Math.floor(minsdiff / 60)).substr(1) + ':' + String(100 + minsdiff % 60).substr(1);
                $("#AR_Duration").val(duration);

            }


            if ($("#AR_Start_Time").val() == "" || $("#AR_End_Time").val() == "") {
                $("#AR_Duration").val("");
            }

        }
        catch (e) {
            alert("Error : AR_Start_End_Change : " + e);
        }
    }

    function RecPatChange() {
        try {
            if ($("#Daily").is(':checked')) {
                $("#AR_Daily").css("display", "block");
                $("#AR_Weekly").css("display", "none");
                $("#AR_Monthly").css("display", "none");
                $("#AR_Yearly").css("display", "none");

            }
            else if ($("#Weekly").is(':checked')) {
                $("#AR_Daily").css("display", "none");
                $("#AR_Weekly").css("display", "block");
                $("#AR_Monthly").css("display", "none");
                $("#AR_Yearly").css("display", "none");
            }
            else if ($("#Monthly").is(':checked')) {
                $("#AR_Daily").css("display", "none");
                $("#AR_Weekly").css("display", "none");
                $("#AR_Monthly").css("display", "block");
                $("#AR_Yearly").css("display", "none");
            }
            else if ($("#Yearly").is(':checked')) {
                $("#AR_Daily").css("display", "none");
                $("#AR_Weekly").css("display", "none");
                $("#AR_Monthly").css("display", "none");
                $("#AR_Yearly").css("display", "block");
            }
        }
        catch (e) {
            alert("Error : RecPatChange: " + e)
        }
    }

    function DailyCheckChange() {
        try {
            if ($("#DailyCheck").is(':checked')) {
                $("#DailyCheck_Nos").removeAttr("disabled");
                $("#DailyCheck_Nos").val("1");
                $("#EveryWeekdaySelect").attr("disabled", "disabled").trigger("chosen:updated");
                $("#EveryWeekdaySelect").val("").trigger("chosen:updated").trigger("chosen:updated");
            }
            else if ($("#EveryWeekday").is(':checked')) {
                $("#DailyCheck_Nos").attr("disabled", "disabled");
                $("#DailyCheck_Nos").val("");
                $("#EveryWeekdaySelect").removeAttr("disabled").trigger("chosen:updated");
                $("#EveryWeekdaySelect").val("").trigger("chosen:updated");
            }
            else {

            }
        }
        catch (e) {
            alert("Error : DailyCheckChange: " + e)
        }
    }

    function YearlyCheckChange() {
        try {


            if ($("#AR_Yearly_RP_Date").is(':checked')) {

                $("#AR_Yearly_RP_MonthWeekDay_WeekNos").attr("disabled", true).trigger("chosen:updated");
                $("#AR_Yearly_RP_MonthWeekDay_WeekDay").attr("disabled", true).trigger("chosen:updated");
                $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").attr("disabled", true).trigger("chosen:updated");
                $("#EveryYearlySelect").attr("disabled", false).trigger("chosen:updated");
                $("#AR_Yearly_RP_Date_Date").attr("disabled", false);
                $("#AR_Yearly_RP_MonthWeekDay_WeekNos").val("").trigger("chosen:updated");
                $("#AR_Yearly_RP_MonthWeekDay_WeekDay").val("").trigger("chosen:updated");
                $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").val("").trigger("chosen:updated");


            }

            else if ($("#AR_Yearly_RP_MonthWeekDay").is(':checked')) {
                $("#AR_Yearly_RP_MonthWeekDay_WeekNos").attr("disabled", false).trigger("chosen:updated");
                $("#AR_Yearly_RP_MonthWeekDay_WeekDay").attr("disabled", false).trigger("chosen:updated");
                $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").attr("disabled", false).trigger("chosen:updated");
                $("#EveryYearlySelect").attr("disabled", true).trigger("chosen:updated");
                $("#AR_Yearly_RP_Date_Date").attr("disabled", true);
                $("#EveryYearlySelect").val("").trigger("chosen:updated");
                $("#AR_Yearly_RP_Date_Date").val("");

            }

        } catch (e) {

            alert("Error : YearlyCheckChange" + e);
        }


    }

    function MonthlyCheckChange() {

        try {

            if ($("#AR_Monthly_NumberredDay").is(':checked')) {
                $("#AR_Month_NumberredDay_Recc").attr("disabled", false);
                $("#AR_Month_NumberredDay_Repeat").attr("disabled", false);
                $("#AR_Month_WeekNos").attr("disabled", true).trigger("chosen:updated");
                $("#AR_Month_WeekDay").attr("disabled", true);
                $("#AR_Month_WeekNo_Repeat").attr("disabled", true);
                $("#AR_Month_WeekNo_Repeat").val("");
                $("#AR_Month_WeekNos").val("").trigger("chosen:updated");
                $("#AR_Month_WeekDay").val("").trigger("chosen:updated");;

            }

            else if ($("#AR_Monthly_WeekNo").is(':checked')) {
                $("#AR_Month_NumberredDay_Recc").attr("disabled", true);
                $("#AR_Month_NumberredDay_Repeat").attr("disabled", true);
                $("#AR_Month_WeekNos").attr("disabled", false).trigger("chosen:updated");
                $("#AR_Month_WeekDay").attr("disabled", false).trigger("chosen:updated");;
                $("#AR_Month_WeekNo_Repeat").attr("disabled", false);
                $("#AR_Month_NumberredDay_Recc").val("");
                $("#AR_Month_NumberredDay_Repeat").val("");
            }



        } catch (e) {

            alert("Error :MonthlyCheckChange" + e);
        }

    }

    function Rangerecurance_CheckChange() {
        try {



            if ($("#RR_NoEnd").is(':checked')) {
                $("#RR_Endafter").val("");
                $("#RR_endTime").val("");
                $("#RR_Endafter").attr("disabled", "disabled");
                $("#RR_endTime").attr("disabled", "disabled");
            }
            else if ($("#RR_EndNos").is(':checked')) {
                $("#RR_Endafter").val("");
                $("#RR_endTime").val("");
                $("#RR_Endafter").attr("disabled", false);
                $("#RR_endTime").attr("disabled", "disabled");
            }
            else if ($("#RR_EndDate").is(':checked')) {
                $("#RR_Endafter").val("");
                $("#RR_endTime").val("");
                $("#RR_Endafter").attr("disabled", "disabled");
                $("#RR_endTime").attr("disabled", false);
            }



        } catch (e) {

            alert("Error : Rangerecurance_CheckChange" + e);
        }


    }

    function SaveRecurrencePattern() {
        try {

            var RecurrencePattern = "";
            var ReccurenceInterval = "";
            var PatternObject = new Array();
            var Flag = false;
            var TestFalg = 0;


            /***********************************************************************************************************/

            if ($("#Daily").is(':checked') == true || $("#Weekly").is(':checked') || $("#Monthly").is(':checked') || $("#Yearly").is(':checked')) {
                if ($("#Daily").is(':checked') == true) {
                    if ($("#DailyCheck").is(':checked') == false && $("#EveryWeekday").is(':checked') == false) {
                        //alert("Select every or every weekday");
                        alert("Select One of the Options in Daily ");
                        TestFalg = TestFalg + 1;
                    }
                    if ($("#DailyCheck").is(':checked') == true && $("#DailyCheck_Nos").val().length > 0) {
                        var type = $("#DailyCheck_Nos").val();
                        if (/^[0-9]+$/.test(type) == false) {
                            alert("please enter only numbers greater than zero");
                            TestFalg = TestFalg + 1;
                        }
                        else {
                            if (type == 0) {
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                $("#DailyCheck_Nos").css("border-color", "#d5d5d5");
                            }
                        }
                    }
                    else {
                        if ($("#DailyCheck").is(':checked') == true) {
                            //  alert("please enter days ");
                            TestFalg = TestFalg + 1;
                            $("#DailyCheck_Nos").css("border-color", "#f59942");

                        }
                        else if ($("#DailyCheck_Nos").val().length > 0) {
                            alert("please check ");
                            TestFalg = TestFalg + 1;
                        }
                    }

                    if ($("#EveryWeekday").is(':checked') == true && $("#EveryWeekdaySelect").val().length > 0) {

                    }
                    else {

                        if ($("#EveryWeekday").is(':checked') == true) {
                            alert("please select day ");
                            TestFalg = TestFalg + 1;
                        }
                        else if ($("#EveryWeekdaySelect").val().length > 0) {
                            alert("please check ");
                            TestFalg = TestFalg + 1;
                        }
                    }
                }

                else if ($("#Weekly").is(':checked') == true) {
                    if ($("#WeeklyRP_Nos").val().length > 0) {
                        $("#WeeklyRP_Nos").css("border-color", "#d5d5d5");
                        var type = $("#WeeklyRP_Nos").val();
                        if (/^[0-9]+$/.test(type) == false) {
                            alert("please enter only numbers greater than zero");
                            TestFalg = TestFalg + 1;
                        }
                        else {
                            if (type == 0) {
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                if ($("#Weekly_Sunday").is(':checked') == true || $("#Weekly_Monday").is(':checked') == true || $("#Weekly_Tuesday").is(':checked') == true || $("#Weekly_Wednesday").is(':checked') == true || $("#Weekly_Thursday").is(':checked') == true || $("#Weekly_Friday").is(':checked') == true || $("#Weekly_Saturday").is(':checked') == true) {

                                }
                                else {
                                    alert("please check any week day");
                                    TestFalg = TestFalg + 1;
                                }
                            }
                        }

                    }
                    else {
                        // alert("please enter recur week");
                        $("#WeeklyRP_Nos").css("border-color", "#f59942");
                        TestFalg = TestFalg + 1;
                    }
                }


                else if ($("#Monthly").is(':checked') == true) {

                    if ($("#AR_Monthly_NumberredDay").is(':checked') == false && $("#AR_Monthly_WeekNo").is(':checked') == false) {
                        alert("please check one option ");
                        TestFalg = TestFalg + 1;

                    }


                    if ($("#AR_Monthly_NumberredDay").is(':checked') == true) {
                        if ($("#AR_Month_NumberredDay_Recc").val().length == 0 || $("#AR_Month_NumberredDay_Repeat").val().length == 0) {
                            //   alert("please fill all details");
                            TestFalg = TestFalg + 1;

                            if ($("#AR_Month_NumberredDay_Recc").val().length == 0 && $("#AR_Month_NumberredDay_Repeat").val().length == 0) {
                                $("#AR_Month_NumberredDay_Repeat").css("border-color", "#f59942");
                                $("#AR_Month_NumberredDay_Recc").css("border-color", "#f59942");
                            }
                            else if ($("#AR_Month_NumberredDay_Recc").val().length == 0) {
                                $("#AR_Month_NumberredDay_Recc").css("border-color", "#f59942");
                                $("#AR_Month_NumberredDay_Repeat").css("border-color", "#d5d5d5");
                            }
                            else if ($("#AR_Month_NumberredDay_Repeat").val().length == 0) {
                                $("#AR_Month_NumberredDay_Repeat").css("border-color", "#f59942");
                                $("#AR_Month_NumberredDay_Recc").css("border-color", "#d5d5d5");
                            }



                        }
                        else {
                            $("#AR_Month_NumberredDay_Repeat").css("border-color", "#d5d5d5");
                            $("#AR_Month_NumberredDay_Recc").css("border-color", "#d5d5d5");

                            var type = $("#AR_Month_NumberredDay_Recc").val();
                            var type123 = $("#AR_Month_NumberredDay_Repeat").val();
                            if (/^[0-9]+$/.test(type) == false || /^[0-9]+$/.test(type123) == false) {
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                if (type == 0 || type123 == 0) {
                                    alert("please enter only numbers greater than zero");
                                    TestFalg = TestFalg + 1;
                                }
                                else {

                                }
                            }

                        }

                    }

                    if ($("#AR_Monthly_WeekNo").is(':checked') == true) {
                        if ($("#AR_Month_WeekNos").val().length == 0 || $("#AR_Month_WeekDay").val().length == 0 || $("#AR_Month_WeekNo_Repeat").val().length == 0) {
                            if ($("#AR_Month_WeekNo_Repeat").val().length == 0) {
                                $("#AR_Month_WeekNo_Repeat").css("border-color", "#f59942");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                $("#AR_Month_WeekNo_Repeat").css("border-color", "#d5d5d5");
                                alert("please fill all details");
                                TestFalg = TestFalg + 1;
                            }
                        }
                        else {
                            $("#AR_Month_WeekNo_Repeat").css("border-color", "#d5d5d5");
                            var type = $("#AR_Month_WeekNo_Repeat").val();
                            if (/^[0-9]+$/.test(type) == false) {
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                if (type == 0) {
                                    alert("please enter only numbers greater than zero");
                                    TestFalg = TestFalg + 1;
                                }
                                else { }
                            }
                        }
                    }
                }

                else if ($("#Yearly").is(':checked') == true) {
                    if ($("#AR_Yearly_Nos").val().length == 0) {
                        // alert("please enter no.of years");
                        $("#AR_Yearly_Nos").css("border-color", "#f59942");
                        TestFalg = TestFalg + 1;
                    }
                    else if ($("#AR_Yearly_RP_Date").is(':checked') == false && $("#AR_Yearly_RP_MonthWeekDay").is(':checked') == false) {
                        $("#AR_Yearly_Nos").css("border-color", "#d5d5d5");
                        var type = $("#AR_Yearly_Nos").val();
                        if (/^[0-9]+$/.test(type) == false) {
                            alert("please enter only numbers greater than zero");
                            TestFalg = TestFalg + 1;
                        }
                        else {
                            if (type == 0) {
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                alert("please check one option");
                                TestFalg = TestFalg + 1;
                            }
                        }
                    }
                    else if ($("#AR_Yearly_RP_Date").is(':checked') == true) {
                        if ($("#EveryYearlySelect").val().length == 0) {

                            TestFalg = TestFalg + 1;
                            var type = $("#AR_Yearly_Nos").val();
                            if (/^[0-9]+$/.test(type) == false) {
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                if (type == 0) {
                                    alert("please enter only numbers greater than zero");
                                    TestFalg = TestFalg + 1;
                                }
                                else {
                                    alert("please select any value");
                                    TestFalg = TestFalg + 1;
                                }
                            }
                        }
                        else if ($("#AR_Yearly_RP_Date_Date").val().length == 0) {
                            $("#AR_Yearly_RP_Date_Date").css("border-color", "#f59942");
                            var type = $("#AR_Yearly_Nos").val();
                            if (/^[0-9]+$/.test(type) == false) {
                                $("#AR_Yearly_RP_Date_Date").css("border-color", "#d5d5d5");
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                if (type == 0) {
                                    $("#AR_Yearly_RP_Date_Date").css("border-color", "#d5d5d5");
                                    alert("please enter only numbers greater than zero");
                                    TestFalg = TestFalg + 1;
                                }
                                else {
                                    // alert("please enter any value");
                                    TestFalg = TestFalg + 1;
                                }
                            }
                        }

                        if ($("#AR_Yearly_Nos").val().length > 0) {
                            $("#AR_Yearly_Nos").css("border-color", "#d5d5d5");
                            var type = $("#AR_Yearly_Nos").val();
                            if (/^[0-9]+$/.test(type) == false) {
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;
                            }
                            else {
                                if (type == 0) {
                                    alert("please enter only numbers greater than zero");
                                    TestFalg = TestFalg + 1;
                                }
                                else {
                                    if ($("#EveryYearlySelect").val().length > 0 && $("#AR_Yearly_RP_Date_Date").val().length > 0) {

                                        $("#AR_Yearly_RP_Date_Date").css("border-color", "#d5d5d5");
                                        var type = $("#AR_Yearly_RP_Date_Date").val();
                                        if (/^[0-9]+$/.test(type) == false) {

                                            alert("please enter only numbers greater than zero");
                                            TestFalg = TestFalg + 1;
                                        }
                                        else {
                                            if (type == 0) {
                                                alert("please enter only numbers greater than zero");
                                                TestFalg = TestFalg + 1;
                                            }
                                            else {

                                            }
                                        }
                                        ;
                                    }
                                }
                            }
                        }
                        else if ($("#AR_Yearly_RP_Date_Date").val().length > 0) {

                            $("#AR_Yearly_RP_Date_Date").css("border-color", "#d5d5d5");

                            var type = $("#AR_Yearly_RP_Date_Date").val();
                            if (/^[0-9]+$/.test(type) == false) {

                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;

                            }
                            else {
                                if (type == 0) {

                                    alert("please enter only numbers greater than zero");
                                    TestFalg = TestFalg + 1;
                                }
                                else { }
                            }
                        }
                        else {
                            var type = $("#AR_Yearly_Nos").val();
                            if (/^[0-9]+$/.test(type) == false) {
                                alert("please enter only numbers greater than zero");
                                TestFalg = TestFalg + 1;

                            }
                            else {
                                if (type == 0) {
                                    alert("please enter only numbers greater than zero");
                                    TestFalg = TestFalg + 1;

                                }
                                else { }
                            }
                        }
                    }

                    else if ($("#AR_Yearly_RP_MonthWeekDay").is(':checked') == true) {
                        if ($("#AR_Yearly_RP_MonthWeekDay_WeekNos").val().length == 0 || $("#AR_Yearly_RP_MonthWeekDay_WeekDay").val().length == 0 || $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").val().length == 0) {
                            alert("please select any value");
                            TestFalg = TestFalg + 1;
                        }
                        else {

                        }
                    }
                }
            }
            else {
                alert("Select Recurrence Pattern");
                TestFalg = TestFalg + 1;
            }

            if (TestFalg == 0) {
            }
            else {
                return;
            }

            /***********************************************************************************************************/


            if ($("#Daily").is(':checked')) {
                Flag = true;
                RecurrencePattern = "Daily";
                ReccurenceInterval = "1";

                if ($("#DailyCheck").is(':checked')) {
                    DailyRecurrenceType = "DailyCheck";
                    var DailyCheck_DaysNos = $("#DailyCheck_Nos").val();

                    PatternObject.push({
                        DailyRecurrenceType: DailyRecurrenceType,
                        DailyCheck_DaysNos: DailyCheck_DaysNos,
                        EveryWeekdaySelect: ""
                    });
                }
                else if ($("#EveryWeekday").is(':checked')) {
                    DailyRecurrenceType = "WeekDayCheck";
                    var EveryWeekdaySelect = $("#EveryWeekdaySelect").val();

                    PatternObject.push({
                        DailyRecurrenceType: DailyRecurrenceType,
                        DailyCheck_DaysNos: "",
                        EveryWeekdaySelect: EveryWeekdaySelect
                    });
                }

            }
            else if ($("#Weekly").is(':checked')) {
                Flag = true;
                RecurrencePattern = "Weekly";
                ReccurenceInterval = $("#WeeklyRP_Nos").val();

                var WeeklyRP_Day = "";
                if ($("#Weekly_Sunday").is(':checked')) { WeeklyRP_Day = "Sunday"; }
                else if ($("#Weekly_Monday").is(':checked')) { WeeklyRP_Day = "Monday"; }
                else if ($("#Weekly_Tuesday").is(':checked')) { WeeklyRP_Day = "Tuesday"; }
                else if ($("#Weekly_Wednesday").is(':checked')) { WeeklyRP_Day = "Wednesday"; }
                else if ($("#Weekly_Thursday").is(':checked')) { WeeklyRP_Day = "Thursday"; }
                else if ($("#Weekly_Friday").is(':checked')) { WeeklyRP_Day = "Friday"; }
                else if ($("#Weekly_Saturday").is(':checked')) { WeeklyRP_Day = "Saturday"; }
                else { alert("Select recurring week day"); }

                PatternObject.push({
                    ReccurenceInterval: ReccurenceInterval,
                    WeeklyRP_Day: WeeklyRP_Day
                });

            }
            else if ($("#Monthly").is(':checked')) {
                Flag = true;
                RecurrencePattern = "Monthly";
                ReccurenceInterval = "1";

                if ($("#AR_Monthly_NumberredDay").is(':checked')) {
                    RecurrencePattern_Monthly = "Day";

                    var AR_Month_NumberredDay_Recc = $("#AR_Month_NumberredDay_Recc").val();
                    var AR_Month_NumberredDay_Repeat = $("#AR_Month_NumberredDay_Repeat").val();

                    PatternObject.push({
                        RecurrencePattern_Monthly: RecurrencePattern_Monthly,
                        AR_Month_NumberredDay_Recc: AR_Month_NumberredDay_Recc,
                        AR_Month_NumberredDay_Repeat: AR_Month_NumberredDay_Repeat,
                        AR_Month_WeekNos: "",
                        AR_Month_WeekDay: "",
                        AR_Month_WeekNo_Repeat: ""

                    });

                }
                else if ($("#AR_Monthly_WeekNo").is(':checked')) {
                    RecurrencePattern_Monthly = "NumberedWeekDay";

                    var AR_Month_WeekNos = $("#AR_Month_WeekNos").val();
                    var AR_Month_WeekDay = $("#AR_Month_WeekDay").val();
                    var AR_Month_WeekNo_Repeat = $("#AR_Month_WeekNo_Repeat").val();

                    PatternObject.push({
                        RecurrencePattern_Monthly: RecurrencePattern_Monthly,
                        AR_Month_NumberredDay_Recc: "",
                        AR_Month_NumberredDay_Repeat: "",
                        AR_Month_WeekNos: AR_Month_WeekNos,
                        AR_Month_WeekDay: AR_Month_WeekDay,
                        AR_Month_WeekNo_Repeat: AR_Month_WeekNo_Repeat
                    });

                }

            }
            else if ($("#Yearly").is(':checked')) {
                Flag = true;
                RecurrencePattern = "Yearly";
                var ReccurenceInterval = $("#AR_Yearly_Nos").val();

                if ($("#AR_Yearly_RP_Date").is(':checked')) {
                    ReccuringPoint = "Date";
                    var EveryYearlySelect = $("#EveryYearlySelect").val();
                    var AR_Yearly_RP_Date_Date = $("#AR_Yearly_RP_Date_Date").val();

                    PatternObject.push({
                        ReccuringPoint: ReccuringPoint,
                        ReccurenceInterval: ReccurenceInterval,
                        EveryYearlySelect: EveryYearlySelect,
                        AR_Yearly_RP_Date_Date: AR_Yearly_RP_Date_Date,

                        AR_Yearly_RP_MonthWeekDay_WeekNos: "",
                        AR_Yearly_RP_MonthWeekDay_WeekDay: "",
                        AR_Yearly_RP_MonthWeekDay_WeekMonth: ""
                    });

                }
                else if ($("#AR_Yearly_RP_MonthWeekDay").is(':checked')) {
                    ReccuringPoint = "MonthWeekDay";
                    var AR_Yearly_RP_MonthWeekDay_WeekNos = $("#AR_Yearly_RP_MonthWeekDay_WeekNos").val();
                    var AR_Yearly_RP_MonthWeekDay_WeekDay = $("#AR_Yearly_RP_MonthWeekDay_WeekDay").val();
                    var AR_Yearly_RP_MonthWeekDay_WeekMonth = $("#AR_Yearly_RP_MonthWeekDay_WeekMonth").val();

                    PatternObject.push({
                        ReccuringPoint: ReccuringPoint,
                        ReccurenceInterval: ReccurenceInterval,
                        EveryYearlySelect: "",
                        AR_Yearly_RP_Date_Date: "",

                        AR_Yearly_RP_MonthWeekDay_WeekNos: AR_Yearly_RP_MonthWeekDay_WeekNos,
                        AR_Yearly_RP_MonthWeekDay_WeekDay: AR_Yearly_RP_MonthWeekDay_WeekDay,
                        AR_Yearly_RP_MonthWeekDay_WeekMonth: AR_Yearly_RP_MonthWeekDay_WeekMonth

                    });

                }

            }

            // alert("Sending Data To Server");
            //  return;

            if (Flag == true) {

            }
            else {
                alert("Select Reccurence Pattern");
                return;
            }

            var RecStartDate = $("#Range_rec_start").val();

            if (RecStartDate == "") {
                alert("Enter Start Date");
                return;
            }
            else {
                RecStartDate = RecStartDate.split('/')[2] + "-" + RecStartDate.split('/')[1] + "-" + RecStartDate.split('/')[0];
            }

            var RecEndReason = "";
            var RecEndNos = "";
            var RecEndDate = "";

            if ($("#RR_NoEnd").is(':checked')) {
                RecEndReason = "0";
            }
            else if ($("#RR_EndNos").is(':checked')) {
                RecEndReason = "EndNos";
                RecEndNos = $("#RR_Endafter").val();
            }
            else if ($("#RR_EndDate").is(':checked')) {
                RecEndReason = "EndDate";
                RecEndDate = $("#RR_endTime").val();

                if (RecEndDate == "") {
                    alert("Enter End Date");
                    return;
                }
                else {
                    RecEndDate = RecEndDate.split('/')[2] + "-" + RecEndDate.split('/')[1] + "-" + RecEndDate.split('/')[0];
                }
            }

            var AR_Start_Time = $("#AR_Start_Time").val();
            var AR_End_Time = $("#AR_End_Time").val();
            var AR_Duration = $("#AR_Duration").val();

            if (AR_Start_Time == "" || AR_End_Time == "" || AR_Duration == "") {
                alert("Enter Start, End and Duration Time");
                return;
            }
            else {

                var DeActivatePattern = ($("#DeActivatePattern").is(':checked'));
                var ReccPatDisableReason = $("#ReccPatDisableReason").val();

                RecPatObj = JSON.stringify({
                    _tagid: $("#LogSheetId").val(),
                    ReccurencePatternId: $("#ReccurencePatternId").val(),
                    AR_Start_Time: AR_Start_Time,
                    AR_End_Time: AR_End_Time,
                    AR_Duration: AR_Duration,
                    RecurrencePattern: RecurrencePattern,
                    RecStartDate: RecStartDate,
                    RecEndReason: RecEndReason,
                    RecEndNos: RecEndNos,
                    RecEndDate: RecEndDate,
                    PatternObject: PatternObject,
                    ActivePattern: DeActivatePattern,
                    ReccPatDisableReason: ReccPatDisableReason
                });
               // alert("RecPatObj : " + RecPatObj);
                StartPageLoader();

                $.ajax({
                    url: "../SaveRecurrencePattern",
                    type: "post",
                    contentType: "application/json",
                    data: RecPatObj,
                    success: function (Resp) {

                        if (Resp == false) {
                            alert("Please try again");
                        }
                        else {
                            $("#ReccurencePatternId").val(Resp);

                            alert("Successfully Saved : " + Resp);
                            $("#ScheduleAssignmentsPopUp").modal('hide');
                            $("#FormScheduleAssignments").fadeOut();
                        }

                        StopPageLoader();
                    },
                    error: function (e) {
                        alert("Error : SaveRecurrencePattern : " + e);
                        StopPageLoader();
                    }
                });

            }

        }
        catch (e) {
            alert("Error : SaveRecurrencePattern " + e);
        }
    }


    function AllowOnlyPositiveIntegers(_id) {

        var Value = $("#" + _id + "").val();

        if (isNaN(Value)) {
            alert("Enter Valid Number");
            $("#" + _id + "").val("");
        }
        else {
            Value = parseInt(Value);
            if (isNaN(Value)) {
                $("#" + _id + "").val("");
            }
            else {
                if (Value > 0) {
                    $("#" + _id + "").val(Value);
                    if (_id == "AR_Month_NumberredDay_Recc") {
                        if (Value > 0 && Value <= 4) {
                            $("#" + _id + "").val(Value);
                        }
                        else {
                            $("#" + _id + "").val("");
                        }
                    }
                    else if (_id == "AR_Yearly_RP_Date_Date") {
                        var valmonth = $("#EveryYearlySelect").val();
                        var monthNumber = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"].indexOf(valmonth) + 1;
                        //alert(monthNumber);
                        var month = monthNumber - 1;
                        var d = new Date();
                        var year = d.getFullYear();
                        var monthStart = new Date(year, month, 1);
                        var monthEnd = new Date(year, month + 1, 1);
                        var monthLength = (monthEnd - monthStart) / (1000 * 60 * 60 * 24)
                        // alert(monthLength);

                        if (Value != monthLength) {
                            $("#" + _id + "").val(monthLength);
                        }
                    }
                }
                else {
                    $("#" + _id + "").val("");
                }
            }
        }
    }



</script>
